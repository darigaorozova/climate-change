<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Climate KG - –î–∞—à–±–æ—Ä–¥</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <h1>Climate Analytics: –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω</h1>
            <ul class="nav-links">
                <li><a href="/">–°–≤–æ–¥–∫–∞ –∏ –ü—Ä–æ–≥–Ω–æ–∑</a></li>
                <li><a href="/dashboard" class="active">Ad-hoc –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <header class="page-header">
            <h2>üîé –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –æ—Ç—á–µ—Ç–æ–≤ (Ad-hoc)</h2>
            <p>–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.</p>
        </header>

        <!-- –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø -->
        <section class="filters-section">
            <div style="margin-bottom: 15px; font-weight: bold; color: #667eea;">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—Ä–æ—Å–∞:</div>
            
            <div class="filter-controls">
                <!-- 1. –ü–µ—Ä–∏–æ–¥ -->
                <div class="filter-group">
                    <label>–ü–µ—Ä–∏–æ–¥:</label>
                    <div style="display: flex; gap: 5px;">
                        <input type="number" id="start-year" value="2020" min="2020" style="width: 70px;">
                        -
                        <input type="number" id="end-year" value="2025" min="2020" max="2025" style="width: 70px;">
                    </div>
                </div>
                
                <!-- 2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ -->
                <div class="filter-group">
                    <label>–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ (Drill):</label>
                    <select id="group-by">
                        <option value="year">üìÖ –ì–æ–¥</option>
                        <option value="month">üìÜ –ú–µ—Å—è—Ü</option>
                        <option value="day">üóìÔ∏è –î–µ–Ω—å</option>
                    </select>
                </div>

                <!-- 3. –ê–≥—Ä–µ–≥–∞—Ü–∏—è -->
                <div class="filter-group">
                    <label>–ê–≥—Ä–µ–≥–∞—Ü–∏—è:</label>
                    <select id="agg-func">
                        <option value="avg">AVG (–°—Ä–µ–¥–Ω–µ–µ)</option>
                        <option value="max">MAX (–ú–∞–∫—Å–∏–º—É–º)</option>
                        <option value="min">MIN (–ú–∏–Ω–∏–º—É–º)</option>
                    </select>
                </div>

                <!-- 4. –ú–µ—Ç—Ä–∏–∫–∏ (–ß–µ–∫–±–æ–∫—Å—ã) -->
                <div class="filter-group">
                    <label>–ú–µ—Ç—Ä–∏–∫–∏:</label>
                    <div style="display: flex; gap: 15px; align-items: center; height: 38px;">
                        <!-- –î–æ–±–∞–≤–∏–ª–∏ —Å—Ç–∏–ª—å flex –∏ gap –¥–ª—è —Å–∞–º–æ–≥–æ –ª–µ–π–±–ª–∞ -->
                        <label style="font-weight: normal; font-size: 0.9rem; display: flex; align-items: center; gap: 5px; cursor: pointer;">
                            <input type="checkbox" id="show-temp" checked> –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
                        </label>
                        <label style="font-weight: normal; font-size: 0.9rem; display: flex; align-items: center; gap: 5px; cursor: pointer;">
                            <input type="checkbox" id="show-precip" checked> –û—Å–∞–¥–∫–∏
                        </label>
                    </div>
                </div>

                <button class="btn-primary" onclick="updateDashboard()">–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
        </section>

        <!-- –ì–†–ê–§–ò–ö–ò -->
        <section class="dashboard-section" id="charts-area">
            <!-- –ì—Ä–∞—Ñ–∏–∫–∏ –±—É–¥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è/–∏—Å—á–µ–∑–∞—Ç—å –∑–¥–µ—Å—å —á–µ—Ä–µ–∑ JS -->
            
            <div class="chart-container" id="container-temp">
                <h4>üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</h4>
                <div id="chart-temp" class="full-height-chart"></div>
            </div>
            
            <div style="height: 30px;" id="spacer"></div>

            <div class="chart-container" id="container-precip">
                <h4>üíß –û—Å–∞–¥–∫–∏</h4>
                <div id="chart-precip" class="full-height-chart"></div>
            </div>
        </section>
    </div>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>